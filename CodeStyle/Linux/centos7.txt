linux命令大全
http://man.linuxde.net/

默认jvm路径
/usr/lib/jvm

ssh
查看ssh服务是否启动systemctl status sshd.service
启动sshd服务systemctl start sshd
修改SSH配置文件/etc/ssh/sshd_config
chkconfig sshd on开机启动|chkconfig sshd off则禁止SSH开机启动
service sshd restart重启SSH服务|service sshd start 启动服务 |service sshd stop 停止服务
AllowUsers user1 user2指定用户登录，如果不加此属性则所有用户都可以登录
PermitRootLogin no禁止root远程登录
http://www.jinbuguo.com/openssh/sshd_config.html
改端口
firewall-cmd --permanent --service=rabbitmq --add-port=63561/tcp
firewall-cmd --reload(添加防火墙)
semanage port -a -t ssh_port_t -p tcp 63561(添加selinux权限)
semanage port -l|grep ssh(查看是否添加成功)

在#%PAM-1.0的下面，即第二行，添加内容
vim /etc/pam.d/sshd
auth required pam_tally2.so deny=3 unlock_time=1800 even_deny_root root_unlock_time=1800
deny  指定最大几次认证错误，如果超出此错误，将执行后面的策略。如锁定N秒，如果后面没有其他策略指定时，默认永远锁定，除非手动解锁。
lock_time  锁定多长时间，按秒为单位；
unlock_time 指定认证被锁后，多长时间自动解锁用户；
magic_root 如果用户uid＝0（即root账户或相当于root的帐户）在帐户认证时调用该模块发现失败时，不计入统计；
no_lock_time 不使用.fail_locktime项在/var/log/faillog 中记录用户 －－－按英文直译不太明白，个人理解即不进行用户锁定；
even_deny_root root用户在认证出错时，一样被锁定（该功能慎用，搞不好就要单用户时解锁了）
root_unlock_time  root用户在失败时，锁定多长时间。该选项一般是配合even_deny_root 一起使用的。
http://www.361way.com/pam-tally2/4277.html

pscp
1、把服务器上的/root/dir目录取回本地"C:\My Documents\data\"目录
C:\>pscp.exe -r root@192.168.32.50:/root/dir "C:\My Documents\data\"
2、把服务器上的/root/file文件取回来本地当前目录
C:\>pscp.exe root@192.168.32.50:/root/file 
3、把本地目录dir、文件file传输到Linux服务器的/root/，并指定服务器端口2009
C:\>pscp.exe -P 2009 -r dir file root@192.168.32.50:/root/
4、把本地文件file传输到Linux服务器的/root/
C:\>pscp.exe file 192.168.32.50:/root/
5、把本地文件file传输到Linux服务器的/root/,使用root和密码
C:\>pscp.exe -pw 123456 -r dir root@192.168.1.123:/root/

查看帮助命令：
C:\>pscp.exe /h
Options:
  -V        打印版本信息并退出
  -pgpfp    打印PGP key指纹并退出
  -p        保留文件属性
  -q        静静的，不要显示统计数据
  -r        递归拷贝目录
  -v        显示冗余信息
  -load sessname  加载保存好的会话设置
  -P port   指定端口（默认22）
  -l user   指定用户连接
  -pw passw 显式的输入用户密码
  -1 -2     强制使用指定SSH协议版本
  -4 -6     强制使用IPv4或IPv6
  -C        使用压缩
  -i key    认证所需要的私有密钥文件
  -noagent  不使用Pageant[不明白这里*]
  -agent    使用Pageant[不明白这里*]
  -batch    禁用所有交互提示
  -unsafe   允许服务器段的通配符(危险的)
  -sftp     强制使用SFTP协议
  -scp      强制使用SCP协议
  
tar
http://blog.csdn.net/rocklee/article/details/73277839
-c: 建立压缩档案
-x：解压
-t：查看内容
-r：向压缩归档文件末尾追加文件
-u：更新原压缩包中的文件
这五个是独立的命令，压缩解压都要用到其中一个，可以和别的命令连用但只能用其中一个。下面的参数是根据需要在压缩或解压档案时可选的。
-z：有gzip属性的
-j：有bz2属性的
-J ：有xz属性的   xz
-Z：有compress属性的
-v：显示所有过程
-O：将文件解开到标准输出
下面的参数-f是必须的
-f: 使用档案名字，切记，这个参数是最后一个参数，后面只能接档案名。
 `--auto-compress'
`-a'
    Select a compression program to use by the archive file name suffix. The following suffixes are recognized:
gzip=.gz .tgz .taz -z
compress=.Z .taZ -Z
bzip2=.bz2 .tz2 .tbz2 .tbz -j
lzip=lz
lzma=.lzma .tlz
lzop=.lzo
xz=.xz -J
-digit //digit部分为数字(1-9)，代表压缩速度，digit越小，则压缩速度越快，但压缩效果越差，digit越大，则压缩速度越慢，压缩效果越好。默认为6.
#tar xzvf /bbs.tar.zip -C /zzz/bbs解压
#tar czvf /zzz.tar.gz ./zzz压缩(绝对路径加P参数，如:tar czvf /zzz.tar.gz /usr/local)
#tar tzf /zzz.tar.gz 查看压缩文件
https://superuser.com/questions/305128/how-to-specify-level-of-compression-when-using-tar-zcvf
https://superuser.com/questions/514260/how-to-obtain-maximum-compression-with-tar-gz

linux zip 命令详解
-1至-9压缩等级(default 6)
-l：显示压缩文件内所包含的文件
-p：与-c参数类似，会将解压缩的结果显示到屏幕上，但不会执行任何的转换
-t：检查压缩文件是否正确
-u：与-f参数类似，但是除了更新现有的文件外，也会将压缩文件中的其它文件解压缩到目录中
-v：执行是时显示详细的信息
-z：仅显示压缩文件的备注文字
-a：对文本文件进行必要的字符转换
-b：不要对文本文件进行字符转换
-C：压缩文件中的文件名称区分大小写
-j：不处理压缩文件中原有的目录路径
-L：将压缩文件中的全部文件名改为小写
-M：将输出结果送到more程序处理
-n：解压缩时不要覆盖原有的文件
-o：不必先询问用户，unzip执行后覆盖原有文件
-P：使用zip的密码选项
-q：执行时不显示任何信息
-s：将文件名中的空白字符转换为底线字符
-V：保留VMS的文件版本信息
-X：解压缩时同时回存文件原来的UID/GID

1、把/home目录下面的mydata目录压缩为mydata.zip
zip -r mydata.zip mydata #压缩mydata目录
2、把/home目录下面的mydata.zip解压到mydatabak目录里面
unzip mydata.zip -d mydatabak
3、把/home目录下面的abc文件夹和123.txt压缩成为abc123.zip
zip -r abc123.zip abc 123.txt
4、把/home目录下面的wwwroot.zip直接解压到/home目录里面
unzip wwwroot.zip
5、把/home目录下面的abc12.zip、abc23.zip、abc34.zip同时解压到/home目录里面
unzip abc\*.zip
6、查看把/home目录下面的wwwroot.zip里面的内容
unzip -v wwwroot.zip
7、验证/home目录下面的wwwroot.zip是否完整
unzip -t wwwroot.zip
8、把/home目录下面wwwroot.zip里面的所有文件解压到第一级目录
unzip -j wwwroot.zip


cent7防火墙
http://havee.me/linux/2015-01/using-firewalls-on-centos-7.html
https://zhuanlan.zhihu.com/p/23519454
启动一个服务：systemctl start firewalld.service
关闭一个服务：systemctl stop firewalld.service
重启一个服务：systemctl restart firewalld.service
显示一个服务的状态：systemctl status firewalld.service
在开机时启用一个服务：systemctl enable firewalld.service
在开机时禁用一个服务：systemctl disable firewalld.service
查看服务是否开机启动：systemctl is-enabled firewalld.service
查看已启动的服务列表：systemctl list-unit-files|grep enabled
drop: 丢弃所有进入的包，而不给出任何响应
block: 拒绝所有外部发起的连接，允许内部发起的连接
public: 允许指定的进入连接
external: 同上，对伪装的进入连接，一般用于路由转发
dmz: 允许受限制的进入连接
work: 允许受信任的计算机被限制的进入连接，类似 workgroup
home: 同上，类似 homegroup
internal: 同上，范围针对所有互联网用户
trusted: 信任所有连接
firewall-cmd --state
firewall-cmd --get-active-zones
firewall-cmd --get-services
firewall-cmd --info-service ssh
firewall-cmd --get-default-zone
firewall-cmd --set-default-zone=external
firewall-cmd --get-zone-of-interface=eth0(查看eth0网卡使用的是哪个zone)
firewall-cmd --zone=public --list-all(查看public信息)
firewall-cmd --zone=external --add-interface=eth0(将eth0添加到external)
firewall-cmd --zone=work --add-service=ssh
firewall-cmd --zone=work --change-interface=eth0(将eth0转至work)
firewall-cmd --zone=work --add-port=8080/tcp
firewall-cmd --zone=work --add-forward-port=port=58080:proto=tcp:toport=8080:toaddr=192.168.1.100 --permanent
firewall-cmd --runtime-to-permanent
firewall-cmd --reload
firewall-cmd --permanent --new-service=rabbitmq
firewall-cmd --permanent --delete-service=rabbitmq
firewall-cmd --permanent --service=rabbitmq --add-port=5672/tcp

https://www.itlnmp.com/401.html
七、 IP 封禁 （这个是我们平时用得最多的）
# firewall-cmd --permanent --add-rich-rule="rule family='ipv4' source address='222.222.222.222' reject" --timeout=300  单个IP
# firewall-cmd --permanent --add-rich-rule="rule family='ipv4' source address='222.222.222.0/24' reject" --timeout=300 IP段
# firewall-cmd --permanent --add-rich-rule="rule family=ipv4 source address=192.168.1.2 port port=80  protocol=tcp  accept" 单个IP的某个端口
这个是我们用得最多的。封一个IP，和一个端口   reject 拒绝   accept 允许
当然，我们仍然可以通过 ipset 来封禁 ip
封禁 ip
# firewall-cmd --permanent --zone=public --new-ipset=blacklist --type=hash:ip
# firewall-cmd --permanent --zone=public --ipset=blacklist --add-entry=222.222.222.222
封禁网段
# firewall-cmd --permanent --zone=public --new-ipset=blacklist --type=hash:net
# firewall-cmd --permanent --zone=public --ipset=blacklist --add-entry=222.222.222.0/24
倒入 ipset 规则
# firewall-cmd --permanent --zone=public --new-ipset-from-file=/path/blacklist.xml
然后封禁 blacklist
# firewall-cmd --permanent --zone=public --add-rich-rule='rule source ipset=blacklist drop'
七、IP封禁和端口
# firewall-cmd --permanent --add-rich-rule="rule family=ipv4 source address=192.168.1.2 port port=80  protocol=tcp  accept"
只对192.168.1.2这个IP只能允许80端口访问  （拒绝访问只需把  accept 换成 reject、删除该规则把 Cadd-rich-rule 改成 Cremove-rich-rule即可）
# firewall-cmd --permanent --add-rich-rule="rule family=ipv4 source address=192.168.1.2/24 port port=80  protocol=tcp  accept"
只对192.168.1.2这个IP段只能允许80端口访问（拒绝访问只需把  accept 换成 reject、删除该规则把 Cadd-rich-rule 改成 Cremove-rich-rule即可）

# firewall-cmd --permanent --direct --add-rule ipv4 filter INPUT 1 -s 192.168.1.0/24 -p tcp --dport=22 -j ACCEPT
# firewall-cmd --permanent --direct --add-rule ipv4 filter INPUT 2 -p tcp --dport=22 -j DROP
# firewall-cmd --reload
# firewall-cmd --direct --get-all-rules
ipv4 filter INPUT 1 -s 192.168.1.0/24 -p tcp --dport=22 -j ACCEPT
ipv4 filter INPUT 2 -p tcp --dport=22 -j DROP

screen
yum install screen -y
Ctrl-a ?	显示所有键绑定信息
Ctrl-a w	显示所有窗口列表
Ctrl-a C-a	切换到之前显示的窗口
Ctrl-a c	创建一个新的运行shell的窗口并切换到该窗口
Ctrl-a n	切换到下一个窗口
Ctrl-a p	切换到前一个窗口(与C-a n相对)
Ctrl-a 0..9	切换到窗口0..9
Ctrl-a a	发送 C-a到当前窗口
Ctrl-a d	暂时断开screen会话
Ctrl-a k	杀掉当前窗口
Ctrl-a [	进入拷贝/回滚模式

分屏幕
C-a S	水平
C-a |	垂直
C-a X	关闭当前屏
C-a Q	关闭当前以外的屏
Screen命令的常规用法:
screen -S david 
screen -d -r:连接一个screen进程，如果该进程是attached，就先踢掉远端用户再连接。
screen -D -r:连接一个screen进程，如果该进程是attached，就先踢掉远端用户并让他logout再连接
screen -ls或者-list:显示存在的screen进程，常用命令
screen -m:如果在一个Screen进程里，用快捷键crtl+a c或者直接打screen可以创建一个新窗口,screen -m可以新建一个screen进程。
screen -dm:新建一个screen，并默认是detached模式，也就是建好之后不会连上去。
screen -p number or name:预先选择一个窗口。
http://man.linuxde.net/screen
https://www.ibm.com/developerworks/cn/linux/l-cn-screen/

静态ip
vi /etc/sysconfig/network-scripts/ifcfg-eth0
BOOTPROTO="static"
ONBOOT="yes"
PEERDNS=no 不重写/etc/resolv.conf

IPADDR=192.168.1.90
NETMASK=255.255.255.0
NM_CONTROLLED=no
GATEWAY=192.168.1.1
DNS1=192.168.1.1
DNS2=8.8.8.8
service network restart

新建用户
http://blog.csdn.net/li_101357/article/details/46778827
useradd -m hadoop
passwd hadoop

ssh配置无密码登录 
http://man.linuxde.net/ssh-keygen
ssh-keygen -t dsa
scp id_dsa.pub user@ip:.ssh/authorized_keys
或
cat id_dsa.pub >> .ssh/authorized_keys
chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys(有时可以不用更改)

netstat命令详解
-a (all)显示所有选项，默认不显示LISTEN相关
-t (tcp)仅显示tcp相关选项
-u (udp)仅显示udp相关选项
-n 拒绝显示别名，能显示数字的全部转化成数字。
-l 仅列出有在 Listen (监听) 的服兆刺
-p 显示建立相关链接的程序名
-r 显示路由信息，路由表
-e 显示扩展信息，例如uid等
-s 按各个协议进行统计
-c 每隔一个固定时间，执行该netstat命令。
提示：LISTEN和LISTENING的状态只有用-a或者-l才能看到
netstat -anltp

SFTP(internal-sftp)
https://www.digitalocean.com/community/tutorials/how-to-enable-sftp-without-shell-access-on-centos-7
1)添加任意sftp用户(用户shell可设为/bin/false或/usr/sbin/nologin，也可以不作更改。useradd xxx -g xxxx -s /bin/false)
2)新建sftp工作目录(目录的拥有者必需为root，组可任意，一般为设为root,权限必需设为755或750)
3)如果支持上传或修改功能需要在sftp工作根目录下新建文件夹，拥有者为sftp登录用户，权限加上读写即刻
4)修改/etc/ssh/sshd_config
把Subsystem sftp /usr/local/libexec/sftp-server行改为Subsystem sftp internal-sftp(可不做更改)
添加Match Group xxx或Match User xxx来设定sftp可登陆的用户
添加ForceCommand internal-sftp(设定强制使用internal-sftp命令)
添加ChrootDirectory /opt/sftp/xxx(%u/%h)来指定sftp根工作目录(%u为当前登录用户名,%h为当用登录用户的home目录)
添加X11Forwarding no(可选)
添加AllowTcpForwarding no(可选)
添加AllowAgentForwarding no(可选)
systemctl restart sshd

systemctl系统服务
http://blog.csdn.net/xiaoyu411502/article/details/51518229
systemctl status svnserve.service查看服务状态
systemctl is-enabled svnserve是否开机启动
systemctl is-active svnserve是否是运行中
systemctl list-unit-files列出所有可用单元
systemctl list-unit-files --type=service列出所有服务
systemctl list-unit-files --type=mount列出所有系统挂载点
systemctl list-unit-files --type=socket列出所有可用系统套接口
systemctl list-unit-files --type=service --state=enabled
systemctl list-unit-files --type=service svnserve.service要看svn服务状态

日志
/var/log/secure可以看到登陆的情况
/var/log/btmp中可以查看到登陆失败的记录（可通过lastb命令进行检查）
/var/log/lastlog中可以查看最近登陆的记录 （可通过last命令进行检查）

centos 7 密码忘记
http://blog.163.com/wilicedon_lee/blog/static/8158848320156311186191/
1. 在启动界面选择  centos linux, with linux***.x86_64
2. 按 e 键进入编辑模式
3. 将光标移动到 linux 16 开头的行，找到 ro 改为 rw init=sysroot/bin/sh  （注：此步网上有显示为 ro rd_lvm.lv_centos_vm20/root）
4. 修改完成后按  ctrl+x 开始执行
5. 进入后输入  chroot /sysroot  回车
6. 输入  passwd  回车
7. 根据提示输入两次你所需的密码
8. 完成后输入   touch /.autorelabel 回车
9. 输入 exit 回车
10.  reboot 重启 过程慢，要耐心等等

3. ro改为rw,在行最后(LANG=en_US.UFT-8)后面添加init=/bin/sh
5. 不需要
9. 输入 exec /sbin/init

后台运行程序
http://blog.csdn.net/fuyuehua22/article/details/42101059

查看磁盘
lsblk查看分区情况
http://man.linuxde.net/lsblk
df -h查看空间使用情况

查看处理器
lscpu
cat /proc/meminfo

查看DMI
dmidecode
http://man.linuxde.net/dmidecode
https://www.cnblogs.com/ggjucheng/archive/2013/01/14/2859613.html
http://www.laozuo.org/6682.html

查看PCI总线信息
lspci
http://man.linuxde.net/lspci

看linux内核
uname -a

查看linux发行商与版本(包括RedHat、SUSE、Debian等)
lsb_release -a

查看centos版本
cat /etc/redhat-release

查看是32位还是64位
getconf LONG_BIT

时间方面
date查看或修改
http://blog.csdn.net/jk110333/article/details/8590746/
tzselect(修改时区)
timedatectl status
timedatectl list-timezones
timedatectl set-timezone Asia/Shanghai
timedatectl set-local-rtc 1(将硬件时钟调整为与本地时钟一致, 0 为同步为 UTC 时间)
timedatectl set-ntp true
timedatectl set-ntp false
https://www.tecmint.com/install-ntp-server-in-centos/
https://www.tecmint.com/set-time-timezone-and-synchronize-time-using-timedatectl-command/
ntpdate -u cn.pool.ntp.org(时间同步，u参数可穿防火墙)
hwclock(clock)
-r, --show读取并打印硬件时钟
-s, --hctosys将硬件时钟同步到系统时钟
-w, --systohc将系统时钟同步到硬件时钟

常用命今
chown -R -v 用户:组 xxxx
http://man.linuxde.net/chown

踢人
w
pkill -kill -t pts/2