linux命令大全
http://man.linuxde.net/

默认jvm路径
/usr/lib/jvm

ssh
查看ssh服务是否启动systemctl status sshd.service
启动sshd服务systemctl start sshd
修改SSH配置文件/etc/ssh/sshd_config
chkconfig sshd on开机启动|chkconfig sshd off则禁止SSH开机启动
service sshd restart重启SSH服务|service sshd start 启动服务 |service sshd stop 停止服务
AllowUsers user1 user2指定用户登录，如果不加此属性则所有用户都可以登录
http://www.jinbuguo.com/openssh/sshd_config.html

pscp
1、把服务器上的/root/dir目录取回本地"C:\My Documents\data\"目录
C:\>pscp.exe -r root@192.168.32.50:/root/dir "C:\My Documents\data\"
2、把服务器上的/root/file文件取回来本地当前目录
C:\>pscp.exe root@192.168.32.50:/root/file 
3、把本地目录dir、文件file传输到Linux服务器的/root/，并指定服务器端口2009
C:\>pscp.exe -P 2009 -r dir file root@192.168.32.50:/root/
4、把本地文件file传输到Linux服务器的/root/
C:\>pscp.exe file 192.168.32.50:/root/
5、把本地文件file传输到Linux服务器的/root/,使用root和密码
C:\>pscp.exe -pw 123456 -r dir root@192.168.1.123:/root/

查看帮助命令：
C:\>pscp.exe /h
Options:
  -V        打印版本信息并退出
  -pgpfp    打印PGP key指纹并退出
  -p        保留文件属性
  -q        静静的，不要显示统计数据
  -r        递归拷贝目录
  -v        显示冗余信息
  -load sessname  加载保存好的会话设置
  -P port   指定端口（默认22）
  -l user   指定用户连接
  -pw passw 显式的输入用户密码
  -1 -2     强制使用指定SSH协议版本
  -4 -6     强制使用IPv4或IPv6
  -C        使用压缩
  -i key    认证所需要的私有密钥文件
  -noagent  不使用Pageant[不明白这里*]
  -agent    使用Pageant[不明白这里*]
  -batch    禁用所有交互提示
  -unsafe   允许服务器段的通配符（危险的）
  -sftp     强制使用SFTP协议
  -scp      强制使用SCP协议
  
tar
http://blog.csdn.net/rocklee/article/details/73277839
-c: 建立压缩档案
-x：解压
-t：查看内容
-r：向压缩归档文件末尾追加文件
-u：更新原压缩包中的文件
这五个是独立的命令，压缩解压都要用到其中一个，可以和别的命令连用但只能用其中一个。下面的参数是根据需要在压缩或解压档案时可选的。
-z：有gzip属性的
-j：有bz2属性的
-J ：有xz属性的   xz
-Z：有compress属性的
-v：显示所有过程
-O：将文件解开到标准输出
下面的参数-f是必须的
-f: 使用档案名字，切记，这个参数是最后一个参数，后面只能接档案名。
 `--auto-compress'
`-a'
    Select a compression program to use by the archive file name suffix. The following suffixes are recognized:
gzip=.gz .tgz .taz
compress=.Z .taZ
bzip2=.bz2 .tz2 .tbz2 .tbz
lzip=lz
lzma=.lzma .tlz
lzop=.lzo
xz=.xz
#tar zxvf /bbs.tar.zip -C /zzz/bbs解压
#tar zcvf /zzz.tar.gz ./zzz压缩
https://superuser.com/questions/305128/how-to-specify-level-of-compression-when-using-tar-zcvf
https://superuser.com/questions/514260/how-to-obtain-maximum-compression-with-tar-gz

linux zip 命令详解
-1至-9压缩等级(default 6)
-l：显示压缩文件内所包含的文件
-p：与-c参数类似，会将解压缩的结果显示到屏幕上，但不会执行任何的转换
-t：检查压缩文件是否正确
-u：与-f参数类似，但是除了更新现有的文件外，也会将压缩文件中的其它文件解压缩到目录中
-v：执行是时显示详细的信息
-z：仅显示压缩文件的备注文字
-a：对文本文件进行必要的字符转换
-b：不要对文本文件进行字符转换
-C：压缩文件中的文件名称区分大小写
-j：不处理压缩文件中原有的目录路径
-L：将压缩文件中的全部文件名改为小写
-M：将输出结果送到more程序处理
-n：解压缩时不要覆盖原有的文件
-o：不必先询问用户，unzip执行后覆盖原有文件
-P：使用zip的密码选项
-q：执行时不显示任何信息
-s：将文件名中的空白字符转换为底线字符
-V：保留VMS的文件版本信息
-X：解压缩时同时回存文件原来的UID/GID

1、把/home目录下面的mydata目录压缩为mydata.zip
zip -r mydata.zip mydata #压缩mydata目录
2、把/home目录下面的mydata.zip解压到mydatabak目录里面
unzip mydata.zip -d mydatabak
3、把/home目录下面的abc文件夹和123.txt压缩成为abc123.zip
zip -r abc123.zip abc 123.txt
4、把/home目录下面的wwwroot.zip直接解压到/home目录里面
unzip wwwroot.zip
5、把/home目录下面的abc12.zip、abc23.zip、abc34.zip同时解压到/home目录里面
unzip abc\*.zip
6、查看把/home目录下面的wwwroot.zip里面的内容
unzip -v wwwroot.zip
7、验证/home目录下面的wwwroot.zip是否完整
unzip -t wwwroot.zip
8、把/home目录下面wwwroot.zip里面的所有文件解压到第一级目录
unzip -j wwwroot.zip


cent7防火墙
http://havee.me/linux/2015-01/using-firewalls-on-centos-7.html
启动一个服务：systemctl start firewalld.service
关闭一个服务：systemctl stop firewalld.service
重启一个服务：systemctl restart firewalld.service
显示一个服务的状态：systemctl status firewalld.service
在开机时启用一个服务：systemctl enable firewalld.service
在开机时禁用一个服务：systemctl disable firewalld.service
查看服务是否开机启动：systemctl is-enabled firewalld.service
查看已启动的服务列表：systemctl list-unit-files|grep enabled
firewall-cmd --state
firewall-cmd --get-active-zones
firewall-cmd --get-services
firewall-cmd --info-service
firewall-cmd --zone=work --add-service=ssh
firewall-cmd --zone=work --change-interface=eth0
firewall-cmd --zone=work --add-port=8080/tcp
firewall-cmd --zone=work --add-forward-port=port=58080:proto=tcp:toport=8080:toaddr=192.168.1.100 --permanent
firewall-cmd --runtime-to-permanent
firewall-cmd --reload

screen
yum install screen -y
C-a ?	显示所有键绑定信息
C-a w	显示所有窗口列表
C-a C-a	切换到之前显示的窗口
C-a c	创建一个新的运行shell的窗口并切换到该窗口
C-a n	切换到下一个窗口
C-a p	切换到前一个窗口(与C-a n相对)
C-a 0..9	切换到窗口0..9
C-a a	发送 C-a到当前窗口
C-a d	暂时断开screen会话
C-a k	杀掉当前窗口
C-a [	进入拷贝/回滚模式
Screen命令的常规用法:
screen -S david 
screen -d -r:连接一个screen进程，如果该进程是attached，就先踢掉远端用户再连接。
screen -D -r:连接一个screen进程，如果该进程是attached，就先踢掉远端用户并让他logout再连接
screen -ls或者-list:显示存在的screen进程，常用命令
screen -m:如果在一个Screen进程里，用快捷键crtl+a c或者直接打screen可以创建一个新窗口,screen -m可以新建一个screen进程。
screen -dm:新建一个screen，并默认是detached模式，也就是建好之后不会连上去。
screen -p number or name:预先选择一个窗口。
http://man.linuxde.net/screen
https://www.ibm.com/developerworks/cn/linux/l-cn-screen/

静态ip
vi /etc/sysconfig/network-scripts/ifcfg-eth0
BOOTPROTO="static"
ONBOOT="yes"
PEERDNS=no 不重写/etc/resolv.conf

IPADDR=192.168.1.90
NETMASK=255.255.255.0
NM_CONTROLLED=no
GATEWAY=192.168.1.1
DNS1=192.168.1.1
DNS2=8.8.8.8
service network restart

新建用户
http://blog.csdn.net/li_101357/article/details/46778827
useradd -m hadoop
passwd hadoop

ssh配置无密码登录 
http://man.linuxde.net/ssh-keygen
ssh-keygen -t dsa
scp id_dsa.pub user@ip:.ssh/authorized_keys
或
cat id_dsa.pub >> .ssh/authorized_keys
chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys(有时可以不用更改)

netstat命令详解
-a (all)显示所有选项，默认不显示LISTEN相关
-t (tcp)仅显示tcp相关选项
-u (udp)仅显示udp相关选项
-n 拒绝显示别名，能显示数字的全部转化成数字。
-l 仅列出有在 Listen (监听) 的服兆刺
-p 显示建立相关链接的程序名
-r 显示路由信息，路由表
-e 显示扩展信息，例如uid等
-s 按各个协议进行统计
-c 每隔一个固定时间，执行该netstat命令。
提示：LISTEN和LISTENING的状态只有用-a或者-l才能看到
netstat -anltp

SFTP(internal-sftp)
https://www.digitalocean.com/community/tutorials/how-to-enable-sftp-without-shell-access-on-centos-7
1)添加任意sftp用户(用户shell可设为/bin/false或/usr/sbin/nologin，也可以不作更改。useradd xxx -g xxxx -s /bin/false)
2)新建sftp工作目录(目录的拥有者必需为root，组可任意，一般为设为root,权限必需设为755或750)
3)如果支持上传或修改功能需要在sftp工作根目录下新建文件夹，拥有者为sftp登录用户，权限加上读写即刻
4)修改/etc/ssh/sshd_config
把Subsystem sftp /usr/local/libexec/sftp-server行改为Subsystem sftp internal-sftp(可不做更改)
添加Match Group xxx或Match User xxx来设定sftp可登陆的用户
添加ForceCommand internal-sftp(设定强制使用internal-sftp命令)
添加ChrootDirectory /opt/sftp/xxx(%u/%h)来指定sftp根工作目录(%u为当前登录用户名,%h为当用登录用户的home目录)
添加X11Forwarding no(可选)
添加AllowTcpForwarding no(可选)
添加AllowAgentForwarding no(可选)
systemctl restart sshd


日志
/var/log/secure可以看到登陆的情况
/var/log/btmp中可以查看到登陆失败的记录（可通过lastb命令进行检查）
/var/log/lastlog中可以查看最近登陆的记录 （可通过last命令进行检查）

centos 7 密码忘记
http://blog.163.com/wilicedon_lee/blog/static/8158848320156311186191/
1. 在启动界面选择  centos linux, with linux***.x86_64
2. 按 e 键进入编辑模式
3. 将光标移动到 linux 16 开头的行，找到 ro 改为 rw init=sysroot/bin/sh  （注：此步网上有显示为 ro rd_lvm.lv_centos_vm20/root）
4. 修改完成后按  ctrl+x 开始执行
5. 进入后输入  chroot /sysroot  回车
6. 输入  passwd  回车
7. 根据提示输入两次你所需的密码
8. 完成后输入   touch /.autorelabel 回车
9. 输入 exit 回车
10.  reboot 重启 过程慢，要耐心等等

SELinux
查看SELinux状态
sestatus或getenforce
临时关闭
setenforce 0(permissive模式)
setenforce 1(enforcing模式)
永久关闭
修改/etc/selinux/config
将SELINUX=enforcing改为SELINUX=disabled
http://blog.csdn.net/jmilk/article/details/50337721
http://blog.chinaunix.net/uid-26495963-id-3300475.html
http://www.toxingwang.com/linux-unix/linux-basic/900.html
getsebool setsebool
chcon
semanage
问题排查
1)tail /var/log/messages
2)sealert -l 2ad073a4-7c64-4175-93ff-9d78f75133af(hash值更具实际情况变动,此步可得到修改建议)
或直接查看审查报告
sealert -a /var/log/audit/audit.log > /path/to/mylogfile.txt
http://www.toxingwang.com/management/security/1011.html